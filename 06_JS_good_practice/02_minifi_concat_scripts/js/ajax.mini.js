function AJAX(a){return this instanceof AJAX?void(this._xhr=new XMLHttpRequest,this._config=this._extendOptions(a),this._assigneEvents(),this._beforsend()):new AJAX(a)}AJAX.prototype._extendOptions=function(a){let b=JSON.parse(JSON.stringify(this._defaultConfig));for(let c in b)c in a||(a[c]=b[c]);return a},AJAX.prototype._assigneEvents=function(){this._xhr.addEventListener("readystatechange",this._handleResponse.bind(this),!1),this._xhr.addEventListener("abort",this._handleError.bind(this),!1),this._xhr.addEventListener("error",this._handleError.bind(this),!1),this._xhr.addEventListener("timeout",this._handleError.bind(this),!1)},AJAX.prototype._assigneUserHeaders=function(){if(Object.keys(this._config.headers).length)for(let a in this._config.headers)this._xhr.setRequestHeader(a,this._config.headers[a])},AJAX.prototype._open=function(){this._xhr.open(this._config.type,this._config.url,this._config.options.async,this._config.options.username,this._config.options.password),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._xhr.timeout=this._config.timeout},AJAX.prototype._beforsend=function(){let a=0<Object.keys(this._config.data).length,b=null;"POST"===this._config.type.toUpperCase()&&a?b=this._serializeFormData(this._config.data):"GET"===this._config.type.toUpperCase()&&a&&(this._config.url+="?"+this._serializeData(this._config.data)),this._open(),this._assigneEvents(),this._send(b)},AJAX.prototype._send=function(a){this._xhr.send(a)},AJAX.prototype._handleResponse=function(){4===this._xhr.readyState&&200<=this._xhr.status&&400>this._xhr.status?"function"==typeof this._config.success&&this._config.success(this._xhr.response,this._xhr):4===this._xhr.readyState&&400<=this._xhr.status&&this._handleError()},AJAX.prototype._handleError=function(){"function"==typeof this._config.faliure&&this._config.faliure(this._xhr)},AJAX.prototype._serializeData=function(a){let b="";for(let c in a)b+=c+"="+encodeURIComponent(a[c])+"&";return b.slice(0,b.length-1)},AJAX.prototype._serializeFormData=function(a){let b=new FormData;for(let c in a)b.append(c,a[c]);return b},AJAX.prototype._defaultConfig={type:"GET",url:window.location.href,data:{},options:{async:!0,timeout:0,username:null,password:null},headers:{}};